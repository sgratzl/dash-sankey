window.dash_sankey=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t){e.exports=window.React},function(e,t){e.exports=window.PropTypes},function(e,t,n){var r=n(5);"string"==typeof r&&(r=[[e.i,r,""]]);var i={insertAt:"top",hmr:!0,transform:void 0,insertInto:void 0};n(7)(r,i);r.locals&&(e.exports=r.locals)},,,function(e,t,n){(t=n(6)(!1)).push([e.i,".dash-sankey-node,\n.dash-sankey-link {\n  fill: steelblue;\n  cursor: pointer;\n}\n\n.dash-sankey-link {\n  opacity: 0.2;\n  stroke: none;\n}\n\n.dash-sankey-link.dash-sankey-selection {\n  opacity: 0.5;\n}\n\n.dash-sankey-node-name {\n  dominant-baseline: central;\n}\n\n.dash-sankey-node-name__last {\n  text-anchor: end;\n}\n\n.dash-sankey-node:hover,\n.dash-sankey-node__selected,\n.dash-sankey-link:hover,\n.dash-sankey-link__selected {\n  opacity: 0.5;\n  fill: orange;\n}\n\n.dash-sankey-layer-name {\n  dominant-baseline: hanging;\n  text-anchor: middle;\n}\n\n.dash-sankey-layer-name__first {\n  text-anchor: start;\n}\n\n.dash-sankey-layer-name__last {\n  text-anchor: end;\n}\n\n.dash-sankey-facet-name {\n  text-anchor: middle;\n  writing-mode: vertical-lr;\n}\n",""]),e.exports=t},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),o=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(o).concat([i]).join("\n")}var a,s,c;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);r&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},function(e,t,n){var r,i,o={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),s=function(e,t){return t?t.querySelector(e):document.querySelector(e)},c=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var r=s.call(this,e,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),u=null,l=0,f=[],d=n(8);function h(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=o[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(b(r.parts[a],t))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(b(r.parts[a],t));o[r.id]={id:r.id,refs:1,parts:s}}}}function y(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function p(e,t){var n=c(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=f[f.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),f.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=c(e.insertAt.before,n);n.insertBefore(t,i)}}function v(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=f.indexOf(e);t>=0&&f.splice(t,1)}function m(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var r=function(){0;return n.nc}();r&&(e.attrs.nonce=r)}return g(t,e.attrs),p(e,t),t}function g(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function b(e,t){var n,r,i,o;if(t.transform&&e.css){if(!(o="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=o}if(t.singleton){var a=l++;n=u||(u=m(t)),r=w.bind(null,n,a,!1),i=w.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",g(t,e.attrs),p(e,t),t}(t),r=x.bind(null,n,t),i=function(){v(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(t),r=O.bind(null,n),i=function(){v(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=y(e,t);return h(n,t),function(e){for(var r=[],i=0;i<n.length;i++){var a=n[i];(s=o[a.id]).refs--,r.push(s)}e&&h(y(e,t),t);for(i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete o[s.id]}}}};var _,k=(_=[],function(e,t){return _[e]=t,_.filter(Boolean).join("\n")});function w(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=k(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function O(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function x(e,t,n){var r=n.css,i=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(r=d(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n.n(r),o=n(0),a=n.n(o);var s=function(e){void 0===e&&(e={});var t=e.onResize,n=Object(o.useRef)(void 0);n.current=t;var r=Object(o.useRef)(),i=Object(o.useState)({width:void 0,height:void 0}),a=i[0],s=i[1],c=Object(o.useRef)(!1);Object(o.useEffect)((function(){return function(){c.current=!0}}),[]);var u=Object(o.useRef)({width:void 0,height:void 0}),l=function(e,t){var n,r=null,i=Object(o.useRef)(null),a=Object(o.useRef)(null),s=Object(o.useCallback)((function(e){a.current=e,l()}),[]),c=Object(o.useRef)(null),u=Object(o.useRef)(),l=function(){var n=null;a.current?n=a.current:i.current?n=i.current:t instanceof HTMLElement&&(n=t),c.current!==n&&(u.current&&(u.current(),u.current=null),c.current=n,n&&(u.current=e(n)))};return!t||t instanceof HTMLElement||(r=t),Object(o.useEffect)((function(){r&&(i.current=r.current),l()}),[r,null==(n=r)?void 0:n.current,t]),s}((function(e){return r.current||(r.current=new ResizeObserver((function(e){if(Array.isArray(e)&&e.length){var t=e[0],r=Math.round(t.contentRect.width),i=Math.round(t.contentRect.height);if(u.current.width!==r||u.current.height!==i){var o={width:r,height:i};n.current?n.current(o):(u.current.width=r,u.current.height=i,c.current||s(o))}}}))),r.current.observe(e),function(){r.current&&r.current.unobserve(e)}}),e.ref);return Object(o.useMemo)((function(){return{ref:l,width:a.width,height:a.height}}),[l,a?a.width:null,a?a.height:null])};function c(e,t){let n=0;if(void 0===t)for(let t of e)(t=+t)&&(n+=t);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function u(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n<t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function l(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n>t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function f(e){return e.target.depth}function d(e){return e.depth}function h(e,t){return t-1-e.height}function y(e,t){return e.sourceLinks.length?e.depth:t-1}function p(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?l(e.sourceLinks,f)-1:0}function v(e){return function(){return e}}function m(e,t){return b(e.source,t.source)||e.index-t.index}function g(e,t){return b(e.target,t.target)||e.index-t.index}function b(e,t){return e.y0-t.y0}function _(e){return e.value}function k(e){return e.index}function w(e){return e.nodes}function O(e){return e.links}function x(e,t){const n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function j({nodes:e}){for(const t of e){let e=t.y0,n=e;for(const n of t.sourceLinks)n.y0=e+n.width/2,e+=n.width;for(const e of t.targetLinks)e.y1=n+e.width/2,n+=e.width}}function E(){let e,t,n,r=0,i=0,o=1,a=1,s=24,f=8,d=k,h=y,p=w,E=O,M=6;function L(){const e={nodes:p.apply(null,arguments),links:E.apply(null,arguments)};return S(e),A(e),R(e),P(e),T(e),j(e),e}function S({nodes:e,links:t}){for(const[t,n]of e.entries())n.index=t,n.sourceLinks=[],n.targetLinks=[];const r=new Map(e.map((t,n)=>[d(t,n,e),t]));for(const[e,n]of t.entries()){n.index=e;let{source:t,target:i}=n;"object"!=typeof t&&(t=n.source=x(r,t)),"object"!=typeof i&&(i=n.target=x(r,i)),t.sourceLinks.push(n),i.targetLinks.push(n)}if(null!=n)for(const{sourceLinks:t,targetLinks:r}of e)t.sort(n),r.sort(n)}function A({nodes:e}){for(const t of e)t.value=void 0===t.fixedValue?Math.max(c(t.sourceLinks,_),c(t.targetLinks,_)):t.fixedValue}function R({nodes:e}){const t=e.length;let n=new Set(e),r=new Set,i=0;for(;n.size;){for(const e of n){e.depth=i;for(const{target:t}of e.sourceLinks)r.add(t)}if(++i>t)throw new Error("circular link");n=r,r=new Set}}function P({nodes:e}){const t=e.length;let n=new Set(e),r=new Set,i=0;for(;n.size;){for(const e of n){e.height=i;for(const{source:t}of e.targetLinks)r.add(t)}if(++i>t)throw new Error("circular link");n=r,r=new Set}}function T(n){const d=function({nodes:e}){const n=u(e,e=>e.depth)+1,i=(o-r-s)/(n-1),a=new Array(n);for(const t of e){const e=Math.max(0,Math.min(n-1,Math.floor(h.call(null,t,n))));t.layer=e,t.x0=r+e*i,t.x1=t.x0+s,a[e]?a[e].push(t):a[e]=[t]}if(t)for(const e of a)e.sort(t);return a}(n);e=Math.min(f,(a-i)/(u(d,e=>e.length)-1)),function(t){const n=l(t,t=>(a-i-(t.length-1)*e)/c(t,_));for(const r of t){let t=i;for(const i of r){i.y0=t,i.y1=t+i.value*n,t=i.y1+e;for(const e of i.sourceLinks)e.width=e.value*n}t=(a-t+e)/(r.length+1);for(let e=0;e<r.length;++e){const n=r[e];n.y0+=t*(e+1),n.y1+=t*(e+1)}D(r)}}(d);for(let e=0;e<M;++e){const t=Math.pow(.99,e),n=Math.max(1-t,(e+1)/M);C(d,t,n),q(d,t,n)}}function q(e,n,r){for(let i=1,o=e.length;i<o;++i){const o=e[i];for(const e of o){let t=0,r=0;for(const{source:n,value:i}of e.targetLinks){let o=i*(e.layer-n.layer);t+=W(n,e)*o,r+=o}if(!(r>0))continue;let i=(t/r-e.y0)*n;e.y0+=i,e.y1+=i,U(e)}void 0===t&&o.sort(b),I(o,r)}}function C(e,n,r){for(let i=e.length-2;i>=0;--i){const o=e[i];for(const e of o){let t=0,r=0;for(const{target:n,value:i}of e.sourceLinks){let o=i*(n.layer-e.layer);t+=B(e,n)*o,r+=o}if(!(r>0))continue;let i=(t/r-e.y0)*n;e.y0+=i,e.y1+=i,U(e)}void 0===t&&o.sort(b),I(o,r)}}function I(t,n){const r=t.length>>1,o=t[r];z(t,o.y0-e,r-1,n),N(t,o.y1+e,r+1,n),z(t,a,t.length-1,n),N(t,i,0,n)}function N(t,n,r,i){for(;r<t.length;++r){const o=t[r],a=(n-o.y0)*i;a>1e-6&&(o.y0+=a,o.y1+=a),n=o.y1+e}}function z(t,n,r,i){for(;r>=0;--r){const o=t[r],a=(o.y1-n)*i;a>1e-6&&(o.y0-=a,o.y1-=a),n=o.y0-e}}function U({sourceLinks:e,targetLinks:t}){if(void 0===n){for(const{source:{sourceLinks:e}}of t)e.sort(g);for(const{target:{targetLinks:t}}of e)t.sort(m)}}function D(e){if(void 0===n)for(const{sourceLinks:t,targetLinks:n}of e)t.sort(g),n.sort(m)}function W(t,n){let r=t.y0-(t.sourceLinks.length-1)*e/2;for(const{target:i,width:o}of t.sourceLinks){if(i===n)break;r+=o+e}for(const{source:e,width:i}of n.targetLinks){if(e===t)break;r-=i}return r}function B(t,n){let r=n.y0-(n.targetLinks.length-1)*e/2;for(const{source:i,width:o}of n.targetLinks){if(i===t)break;r+=o+e}for(const{target:e,width:i}of t.sourceLinks){if(e===n)break;r-=i}return r}return L.update=function(e){return j(e),e},L.nodeId=function(e){return arguments.length?(d="function"==typeof e?e:v(e),L):d},L.nodeAlign=function(e){return arguments.length?(h="function"==typeof e?e:v(e),L):h},L.nodeSort=function(e){return arguments.length?(t=e,L):t},L.nodeWidth=function(e){return arguments.length?(s=+e,L):s},L.nodePadding=function(t){return arguments.length?(f=e=+t,L):f},L.nodes=function(e){return arguments.length?(p="function"==typeof e?e:v(e),L):p},L.links=function(e){return arguments.length?(E="function"==typeof e?e:v(e),L):E},L.linkSort=function(e){return arguments.length?(n=e,L):n},L.size=function(e){return arguments.length?(r=i=0,o=+e[0],a=+e[1],L):[o-r,a-i]},L.extent=function(e){return arguments.length?(r=+e[0][0],o=+e[1][0],i=+e[0][1],a=+e[1][1],L):[[r,i],[o,a]]},L.iterations=function(e){return arguments.length?(M=+e,L):M},L}var M=Math.PI,L=2*M,S=L-1e-6;function A(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function R(){return new A}A.prototype=R.prototype={constructor:A,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-e,c=r-t,u=o-e,l=a-t,f=u*u+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>1e-6)if(Math.abs(l*s-c*u)>1e-6&&i){var d=n-o,h=r-a,y=s*s+c*c,p=d*d+h*h,v=Math.sqrt(y),m=Math.sqrt(f),g=i*Math.tan((M-Math.acos((y+f-p)/(2*v*m)))/2),b=g/m,_=g/v;Math.abs(b-1)>1e-6&&(this._+="L"+(e+b*u)+","+(t+b*l)),this._+="A"+i+","+i+",0,0,"+ +(l*d>u*h)+","+(this._x1=e+_*s)+","+(this._y1=t+_*c)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,i,o){e=+e,t=+t,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),c=e+a,u=t+s,l=1^o,f=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+c+","+u:(Math.abs(this._x1-c)>1e-6||Math.abs(this._y1-u)>1e-6)&&(this._+="L"+c+","+u),n&&(f<0&&(f=f%L+L),f>S?this._+="A"+n+","+n+",0,1,"+l+","+(e-a)+","+(t-s)+"A"+n+","+n+",0,1,"+l+","+(this._x1=c)+","+(this._y1=u):f>1e-6&&(this._+="A"+n+","+n+",0,"+ +(f>=M)+","+l+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};Array.prototype.slice;function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=N(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function I(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||N(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}var W=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.set=t instanceof Set?t:new Set(t),this.givenIds=Array.isArray(t)?t:null,this.has=this.set.has.bind(this.set)}var t,n,r;return t=e,(n=[{key:"elems",get:function(){var e;return null!==(e=this.givenIds)&&void 0!==e?e:I(this.set)}},{key:"isEmpty",get:function(){return 0===this.set.size}},{key:"isNotEmpty",get:function(){return this.set.size>0}},{key:"size",get:function(){return this.set.size}},{key:"length",get:function(){return this.set.size}},{key:"intersect",value:function(t){var n=this;if(this.isEmpty)return this.copy();if(this===t)return this.copy();var r=new Set;if(t instanceof e)t.set.forEach((function(e){n.has(e)&&r.add(e)}));else{var i,o=C(t);try{for(o.s();!(i=o.n()).done;){var a=i.value;this.has(a)&&r.add(a)}}catch(e){o.e(e)}finally{o.f()}}return new e(r)}},{key:"copy",value:function(){var t;return new e(null!==(t=this.givenIds)&&void 0!==t?t:new Set(this.set))}},{key:"intersectUpdate",value:function(t){if(!this.isEmpty&&this!==t)if(this.givenIds=null,t instanceof e){if(t.isEmpty)return void this.set.clear();var n,r=C(this.elems);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.has(i)||this.set.delete(i)}}catch(e){r.e(e)}finally{r.f()}}else{var o,a=new Set(t),s=C(this.elems);try{for(s.s();!(o=s.n()).done;){var c=o.value;a.has(c)||this.set.delete(c)}}catch(e){s.e(e)}finally{s.f()}}}},{key:"withoutUpdate",value:function(e){if(!this.isEmpty&&!e.isEmpty){this.givenIds=null;var t,n=C(this.elems);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.has(r)&&this.set.delete(r)}}catch(e){n.e(e)}finally{n.f()}}}},{key:"without",value:function(e){var t=this.copy();return t.withoutUpdate(e),t}},{key:"addUpdate",value:function(e){if(this!==e&&!e.isEmpty){this.givenIds=null;var t,n=C(e.set);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.set.add(r)}}catch(e){n.e(e)}finally{n.f()}}}}])&&U(t.prototype,n),r&&U(t,r),e}();function B(e,t){return T(T({},t),{},{left:"number"==typeof e?e:e.left,right:"number"==typeof e?e:e.right,top:"number"==typeof e?e:e.top,bottom:"number"==typeof e?e:e.bottom})}var $=i.a.oneOfType([i.a.number.isRequired,i.a.shape({left:i.a.number.isRequired,top:i.a.number.isRequired,right:i.a.number.isRequired,bottom:i.a.number.isRequired}).isRequired]);function Y(e){return Array.isArray(e)}function Z(){}function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Q(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function V(e){return function(e){if(Array.isArray(e))return X(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){if(e){if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var K={left:5,top:5,right:5,bottom:20};function ee(e,t){var n,r=[],i=V(new Set(e.map((function(e){return e.x0})))).sort((function(e,t){return e-t})),o=new Map(i.map((function(e,t){return[e,t]}))),a=J(e);try{for(a.s();!(n=a.n()).done;){var s,c,u=n.value,l=null!==(s=null!==(c=u.layer)&&void 0!==c?c:o.get(u.x0))&&void 0!==s?s:0;u.layer=l;var f,d,h=r[l];if(null==h)r[l]={id:l.toString(),name:null!==(f=null==t||null===(d=t[l])||void 0===d?void 0:d.name)&&void 0!==f?f:"Layer ".concat(l),overlap:u.overlap.copy(),x0:u.x0,x1:u.x1,y0:u.y0,y1:u.y1,nodes:[u]};else h.overlap.addUpdate(u.overlap),h.y0=Math.min(h.y0,u.y0),h.y1=Math.max(h.y1,u.y1),h.nodes.push(u)}}catch(e){a.e(e)}finally{a.f()}return r}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ae={left:5,top:5,right:5,bottom:20};function se(e,t){var n;return null!==(n=e.layer)&&void 0!==n?n:y(e,t)}function ce(e,t){var n=e.layers,r=e.nodes,i=e.links,a=t.width,s=void 0===a?500:a,c=t.height,u=void 0===c?300:c,l=t.padding,f=void 0===l?ae:l,v=t.iterations,m=void 0===v?6:v,g=t.nodeAlign,b=void 0===g?n?"layer":"justify":g,_=t.nodePadding,k=void 0===_?8:_,w=t.nodeWidth,O=void 0===w?24:w,x=t.nodeSort,j=void 0===x?"auto":x,M=Object(o.useMemo)((function(){return B(f,ae)}),[f]),L=Object(o.useMemo)((function(){var e=E();e.extent([[M.left,M.top],[s-M.left-M.right,u-M.top-M.bottom]]);var t={left:d,right:h,center:p,justify:y,layer:se};return e.nodeId((function(e){return e.id})),e.iterations(m).nodeAlign(t[b]).nodeWidth(O).nodePadding(k).nodeSort("auto"===j?void 0:null),e}),[M,s,u,m,b,O,k,j]),S=Object(o.useMemo)((function(){return function(e){var t=new Map,n=[],r=[];function i(e,r){var i=new W(e.ids);t.set("node:".concat(e.id),i);var o=i.copy(),a=i.copy();t.set("missing_in:".concat(e.id),o),t.set("missing_out:".concat(e.id),a);var s=G(G({layer:r},e),{},{overlap:i,fixedValue:e.ids.length,missingIn:o,missingOut:a});return n.push(s),s}function o(e,n,i,o){if(!i.isEmpty){e.missingOut.withoutUpdate(i),n.missingIn.withoutUpdate(i);var a=null!=o?o:"".concat(e.id,"/").concat(n.id);t.set("link:".concat(a),i);var s={id:a,name:"".concat(e.name," → ").concat(n.name),value:i.size,overlap:i,source:e.id,target:n.id};return r.push(s),s}}if(e.layers)for(var a=e.layers.map((function(e,t){return e.nodes.map((function(e){return i(e,t)}))})),s=0;s<a.length-1;s+=1){var c,u=a[s],l=a[s+1],f=J(u);try{for(f.s();!(c=f.n()).done;){var d,h=c.value,y=J(l);try{for(y.s();!(d=y.n()).done;){var p=d.value;o(h,p,h.overlap.intersect(p.overlap))}}catch(e){y.e(e)}finally{y.f()}}}catch(e){f.e(e)}finally{f.f()}}if(e.nodes){var v,m=J(e.nodes);try{for(m.s();!(v=m.n()).done;){i(v.value)}}catch(e){m.e(e)}finally{m.f()}}if(e.links){var g,b=new Map(n.map((function(e){return[e.id,e]}))),_=J(e.links);try{for(_.s();!(g=_.n()).done;){var k=g.value,w=b.get(k.source),O=b.get(k.target),x=k.ids?new W(k.ids):w.overlap.intersect(O.overlap);o(w,O,x,k.id)}}catch(e){_.e(e)}finally{_.f()}}var j,E=ee(n,e.layers),M=J(E);try{for(M.s();!(j=M.n()).done;){var L=j.value;t.set("layer:".concat(L.id),L.overlap)}}catch(e){M.e(e)}finally{M.f()}return{nodes:n,links:r,layers:E,getOverlap:function(e,n){var r;return null!==(r=t.get("".concat(e,":").concat(n)))&&void 0!==r?r:new W([])}}}({layers:n,nodes:r,links:i})}),[n,r,i]),A=Object(o.useMemo)((function(){if(0===S.nodes.length)return{nodes:[],links:[],layers:[]};var e=L({nodes:S.nodes.map((function(e){return ie({},e)})),links:S.links.map((function(e){return ie({},e)}))});return{nodes:e.nodes,links:e.links,layers:ee(e.nodes,n)}}),[S,L,n]),R=A.layers.reduce((function(e,t){return Math.max(e,t.y1)}),0);return{layoutGraph:A,graph:S,maxLayerY1:R,nodeWidth:O}}var ue=[];function le(e,t){if(!e||0===e.length)return function(){return!0};var n=new Set;return t.forEach((function(t,r){(e.includes(t.name)||e.includes(t.id)||e.includes(r))&&n.add(r)})),n.has.bind(n)}function fe(e,t){var n=t.selection,r=t.selections,i=void 0===r?ue:r,a=t.setProps,s=void 0===a?Z:a,c=Object(o.useMemo)((function(){return(null!=i?i:[]).map((function(t){return ie(ie({},t),{},{overlap:new W(t.ids),matchLayer:le(t.layers,e.layers)})}))}),[i,e.layers]),u=Object(o.useMemo)((function(){var e;return new W(Y(n)?n:null!==(e=null==n?void 0:n.ids)&&void 0!==e?e:[])}),[n]),l=Object(o.useCallback)((function(t){var n,r;t.preventDefault(),t.stopPropagation();var i=null!==(n=t.currentTarget.dataset.id)&&void 0!==n?n:"",o=null!==(r=t.currentTarget.dataset.type)&&void 0!==r?r:"node",a=e.getOverlap(o,i);s({selection:{id:i,type:o,ids:a.elems}})}),[e,s]),f=te(Object(o.useState)(null),2),d=f[0],h=f[1],y=Object(o.useCallback)((function(t){var n,r,i=null!==(n=t.currentTarget.dataset.id)&&void 0!==n?n:"",o=null!==(r=t.currentTarget.dataset.type)&&void 0!==r?r:"node",a=e.getOverlap(o,i);h({id:i,type:o,overlap:a})}),[h,e]),p=Object(o.useCallback)((function(){h(null)}),[h]);return Object(o.useMemo)((function(){var e;return{isSelected:function(e,t){return d?d.id===t&&d.type===e:function(e,t,n){return null!=e&&!Y(e)&&e.type===t&&e.id===n}(n,e,t)},others:c,overlap:null!==(e=null==d?void 0:d.overlap)&&void 0!==e?e:u,onClick:l,onMouseEnter:y,onMouseLeave:p}}),[l,y,p,d,u,c,n])}const de=Math.PI,he=2*de,ye=he-1e-6;function pe(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function ve(){return new pe}pe.prototype=ve.prototype={constructor:pe,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-e,c=r-t,u=o-e,l=a-t,f=u*u+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>1e-6)if(Math.abs(l*s-c*u)>1e-6&&i){var d=n-o,h=r-a,y=s*s+c*c,p=d*d+h*h,v=Math.sqrt(y),m=Math.sqrt(f),g=i*Math.tan((de-Math.acos((y+f-p)/(2*v*m)))/2),b=g/m,_=g/v;Math.abs(b-1)>1e-6&&(this._+="L"+(e+b*u)+","+(t+b*l)),this._+="A"+i+","+i+",0,0,"+ +(l*d>u*h)+","+(this._x1=e+_*s)+","+(this._y1=t+_*c)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,i,o){e=+e,t=+t,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),c=e+a,u=t+s,l=1^o,f=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+c+","+u:(Math.abs(this._x1-c)>1e-6||Math.abs(this._y1-u)>1e-6)&&(this._+="L"+c+","+u),n&&(f<0&&(f=f%he+he),f>ye?this._+="A"+n+","+n+",0,1,"+l+","+(e-a)+","+(t-s)+"A"+n+","+n+",0,1,"+l+","+(this._x1=c)+","+(this._y1=u):f>1e-6&&(this._+="A"+n+","+n+",0,"+ +(f>=de)+","+l+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var me=ve,ge=(Array.prototype.slice,function(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}),be=function(e){return function(){return e}};function _e(e){this._context=e}_e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var ke=function(e){return new _e(e)};function we(e){return e[0]}function Oe(e){return e[1]}var xe=function(e,t,n){var r=null,i=be(!0),o=null,a=ke,s=null;function c(c){var u,l,f,d,h,y=(c=ge(c)).length,p=!1,v=new Array(y),m=new Array(y);for(null==o&&(s=a(h=me())),u=0;u<=y;++u){if(!(u<y&&i(d=c[u],u,c))===p)if(p=!p)l=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=u-1;f>=l;--f)s.point(v[f],m[f]);s.lineEnd(),s.areaEnd()}p&&(v[u]=+e(d,u,c),m[u]=+t(d,u,c),s.point(r?+r(d,u,c):v[u],n?+n(d,u,c):m[u]))}if(h)return s=null,h+""||null}function u(){return function(e,t){var n=be(!0),r=null,i=ke,o=null;function a(a){var s,c,u,l=(a=ge(a)).length,f=!1;for(null==r&&(o=i(u=me())),s=0;s<=l;++s)!(s<l&&n(c=a[s],s,a))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+e(c,s,a),+t(c,s,a));if(u)return o=null,u+""||null}return e="function"==typeof e?e:void 0===e?we:be(e),t="function"==typeof t?t:void 0===t?Oe:be(t),a.x=function(t){return arguments.length?(e="function"==typeof t?t:be(+t),a):e},a.y=function(e){return arguments.length?(t="function"==typeof e?e:be(+e),a):t},a.defined=function(e){return arguments.length?(n="function"==typeof e?e:be(!!e),a):n},a.curve=function(e){return arguments.length?(i=e,null!=r&&(o=i(r)),a):i},a.context=function(e){return arguments.length?(null==e?r=o=null:o=i(r=e),a):r},a}().defined(i).curve(a).context(o)}return e="function"==typeof e?e:void 0===e?we:be(+e),t="function"==typeof t?t:be(void 0===t?0:+t),n="function"==typeof n?n:void 0===n?Oe:be(+n),c.x=function(t){return arguments.length?(e="function"==typeof t?t:be(+t),r=null,c):e},c.x0=function(t){return arguments.length?(e="function"==typeof t?t:be(+t),c):e},c.x1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:be(+e),c):r},c.y=function(e){return arguments.length?(t="function"==typeof e?e:be(+e),n=null,c):t},c.y0=function(e){return arguments.length?(t="function"==typeof e?e:be(+e),c):t},c.y1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:be(+e),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(r).y(t)},c.defined=function(e){return arguments.length?(i="function"==typeof e?e:be(!!e),c):i},c.curve=function(e){return arguments.length?(a=e,null!=o&&(s=a(o)),c):a},c.context=function(e){return arguments.length?(null==e?o=s=null:s=a(o=e),c):o},c};function je(e){return e<0?-1:1}function Ee(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(je(o)+je(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Me(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Le(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function Se(e){this._context=e}function Ae(e){this._context=new Re(e)}function Re(e){this._context=e}function Pe(e){return new Se(e)}function Te(e){var t=e.y0;return t+(e.y1-t)*(e.missingIn.size/e.overlap.size)-t}function qe(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=-e.width/2+e.width*i,a=e.width*n,s=Te(e.target),c=xe().curve(Pe).x((function(e){return e.x})).y0((function(e){return e.y0})).y1((function(e){return e.y1}));return null!==(r=c([{x:e.source.x1,y0:e.y0+o,y1:e.y0+o+a},{x:e.source.x1+t,y0:e.y0+o,y1:e.y0+o+a},{x:e.target.x0-t,y0:e.y1+s+o,y1:e.y1+s+o+a},{x:e.target.x0,y0:e.y1+s+o,y1:e.y1+s+o+a}]))&&void 0!==r?r:""}function Ce(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=e.x1,o=e.y1,a=o-(o-e.y0)*(e.missingOut.size/e.overlap.size),s=(o-a)*n;a+=(o-a)*r;var c=s,u=i+c,l="L".concat(i+t,",").concat(a," C").concat(i+t+c/2,",").concat(a," ").concat(u,",").concat(o-t-s/2," ").concat(u,",").concat(o+t),f="L".concat(i+t,",").concat(o+t," C").concat(i+t,",").concat(o+.5*t," ").concat(i+.5*t,",").concat(o," ").concat(i,",").concat(o);return"M".concat(i,",").concat(a," ").concat(l," ").concat(f," Z")}function Ie(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=e.x0,o=e.y0,a=o+(e.y1-o)*(e.missingIn.size/e.overlap.size),s=(a-o)*n;o+=(a-o)*r;var c=s,u=i-c,l="L".concat(i-t,",").concat(a," C").concat(i-t-c/2,",").concat(a," ").concat(u,",").concat(o+t+s/2," ").concat(u,",").concat(o-t),f="L".concat(i-t,",").concat(o-t," C").concat(i-t,",").concat(o-.5*t," ").concat(i+.5*t,",").concat(o," ").concat(i,",").concat(o);return"M".concat(i,",").concat(a," ").concat(l," ").concat(f," Z")}function Ne(e,t){if(null==t)return e.toLocaleString();var n=Math.round(1e3*e/t)/10;return"".concat(n.toLocaleString(),"% (").concat(e.toLocaleString(),"/").concat(t.toLocaleString(),")")}Se.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Le(this,this._t0,Me(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Le(this,Me(this,n=Ee(this,e,t)),n);break;default:Le(this,this._t0,n=Ee(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(Ae.prototype=Object.create(Se.prototype)).point=function(e,t){Se.prototype.point.call(this,t,e)},Re.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};var ze=function(e){var t,n,r=e.layer,i=e.i,o=e.lineOffset,s=e.maxLayerY1,c=e.nLayers,u=e.nodeWidth,l=e.selections,f=e.total,d=s-r.y0,h=i>0?u/2:0;return i===c-1&&(h=u),a.a.createElement("g",{key:r.id,transform:"translate(".concat(null!==(t=r.x0)&&void 0!==t?t:0,",").concat(null!==(n=r.y0)&&void 0!==n?n:0,")"),"data-type":"layer","data-id":r.id,onClick:l.onClick,onMouseEnter:l.onMouseEnter,onMouseLeave:l.onMouseLeave,className:D(l.isSelected("layer",r.id)&&"dash-sankey-layer__picked")},a.a.createElement("text",{x:h,y:d,dy:o+2,className:D("dash-sankey-layer-name",0===i&&"dash-sankey-layer-name__first",i===c-1&&"dash-sankey-layer-name__last")},r.name),a.a.createElement("title",null,r.name,": ",Ne(r.overlap.length,f)))},Ue=function(e){var t=e.link,n=e.lineOffset,r=e.selections,i=e.total,o=r.overlap.intersect(t.overlap),s=t.overlap.size,c=0,u=null,l=r.others.length<3;return a.a.createElement("g",{key:t.id,"data-type":"link","data-id":t.id,onClick:r.onClick,onMouseEnter:r.onMouseEnter,onMouseLeave:r.onMouseLeave},a.a.createElement("path",{d:qe(t,n,1),className:D("dash-sankey-link",r.isSelected("link",t.id)&&"dash-sankey-link__picked")}),a.a.createElement("title",null,t.name,": ",Ne(t.value,i)),r.others.map((function(e){var r,i;null!=u&&!u.isEmpty&&l&&(c+=u.without(e.overlap).size);var o=e.overlap.intersect(t.overlap);return u=o,o.isEmpty||!e.matchLayer(null!==(r=t.source.layer)&&void 0!==r?r:0)&&!e.matchLayer(null!==(i=t.target.layer)&&void 0!==i?i:0)?null:a.a.createElement("path",{key:e.color,d:qe(t,n,o.size/s,c/t.overlap.size),className:"dash-sankey-link dash-sankey-selection",style:{fill:e.color}})})),o.isNotEmpty&&a.a.createElement("path",{d:qe(t,n,o.size/t.overlap.size),className:"dash-sankey-link dash-sankey-link__selected"}))},De=function(e){var t=e.node,n=e.selections,r=e.lineOffset,i=e.total;if(t.missingIn.isEmpty||t.layer<=0)return null;var o=n.overlap.intersect(t.missingIn),s=t.missingIn.size,c=0,u=null,l=n.others.length<3;return a.a.createElement("g",{key:t.id,"data-type":"missing_in","data-id":t.id,onClick:n.onClick,onMouseEnter:n.onMouseEnter,onMouseLeave:n.onMouseLeave},a.a.createElement("path",{d:Ie(t,r,1),className:D("dash-sankey-link dash-sankey-link__missing",n.isSelected("missing_in",t.id)&&"dash-sankey-link__picked")}),a.a.createElement("title",null,"? → ",t.name,": ",Ne(t.missingIn.length,i)),n.others.map((function(e){var n;null!=u&&!u.isEmpty&&l&&(c+=u.without(e.overlap).size);var i=e.overlap.intersect(t.missingIn);return u=i,i.isEmpty||!e.matchLayer(null!==(n=t.layer)&&void 0!==n?n:0)?null:a.a.createElement("path",{key:e.color,d:Ie(t,r,i.size/s,c/s),className:"dash-sankey-link dash-sankey-link__missing dash-sankey-selection",style:{fill:e.color}})})),o.isNotEmpty&&a.a.createElement("path",{d:Ie(t,r,o.size/s,c/s),className:"dash-sankey-link dash-sankey-link__missing dash-sankey-link__selected"}))},We=function(e){var t=e.node,n=e.nLayers,r=e.selections,i=e.lineOffset,o=e.total,s=t.layer>=n-1;if(t.missingOut.isEmpty||s)return null;var c=r.overlap.intersect(t.missingOut),u=t.missingOut.size,l=0,f=null,d=r.others.length<3;return a.a.createElement("g",{key:t.id,"data-type":"missing_out","data-id":t.id,onClick:r.onClick,onMouseEnter:r.onMouseEnter,onMouseLeave:r.onMouseLeave},a.a.createElement("path",{d:Ce(t,i,1),className:D("dash-sankey-link dash-sankey-link__missing",r.isSelected("missing_out",t.id)&&"dash-sankey-link__picked")}),a.a.createElement("title",null,t.name," → ?: ",Ne(t.missingOut.length,o)),r.others.map((function(e){var n;null!=f&&!f.isEmpty&&d&&(l+=f.without(e.overlap).size);var r=e.overlap.intersect(t.missingOut);return f=r,r.isEmpty||!e.matchLayer(null!==(n=t.layer)&&void 0!==n?n:0)?null:a.a.createElement("path",{key:e.color,d:Ce(t,i,r.size/u,l/u),className:"dash-sankey-link dash-sankey-link__missing dash-sankey-selection",style:{fill:e.color}})})),c.isNotEmpty&&a.a.createElement("path",{d:Ce(t,i,c.size/u),className:"dash-sankey-link dash-sankey-link__missing dash-sankey-link__selected"}))},Be=function(e){var t=e.node,n=e.selections,r=e.nodeWidth,i=e.nLayers,o=e.total,s=n.overlap.intersect(t.overlap),c=t.y1-t.y0,u=t.layer>=i-1,l=t.overlap.size,f=0,d=null,h=n.others.length<3;return a.a.createElement("g",{key:t.id,"data-type":"node","data-id":t.id,transform:"translate(".concat(t.x0,",").concat(t.y0,")"),onClick:n.onClick,onMouseEnter:n.onMouseEnter,onMouseLeave:n.onMouseLeave},a.a.createElement("rect",{width:r,height:c,className:D("dash-sankey-node",n.isSelected("node",t.id)&&"dash-sankey-node__picked")}),n.others.map((function(e){var n;null!=d&&!d.isEmpty&&h&&(f+=d.without(e.overlap).size);var i=e.overlap.intersect(t.overlap);return d=i,i.isEmpty||!e.matchLayer(null!==(n=t.layer)&&void 0!==n?n:0)?null:a.a.createElement("rect",{key:e.color,y:c*(f/l),width:r,height:c*(i.size/l),className:"dash-sankey-node dash-sankey-selection",style:{fill:e.color}})})),s.isNotEmpty&&a.a.createElement("rect",{width:r,height:c*(s.size/l),className:"dash-sankey-node dash-sankey-node__selected"}),a.a.createElement("text",{x:u?0:r,y:c/2,dx:u?-2:2,className:D("dash-sankey-node-name",u&&"dash-sankey-node-name__last")},t.name,function(e,t){if(null==t)return"";var n=Math.round(1e3*e/t)/10;return" (".concat(n.toLocaleString(),"%)")}(t.value,o)),a.a.createElement("title",null,t.name,": ",Ne(t.value,o)))},$e=function(e){var t=e.lineOffset,n=void 0===t?5:t,r=e.layers,i=e.nodes,s=e.links,c=e.showLayers,u=void 0===c||c,l=e.total,f=ce({layers:r,nodes:i,links:s},{width:e.width,height:e.height,iterations:e.iterations,nodeAlign:e.nodeAlign,nodePadding:e.nodePadding,nodeSort:e.nodeSort,nodeWidth:e.nodeWidth,padding:e.padding}),d=f.layoutGraph,h=f.maxLayerY1,y=f.nodeWidth,p=fe(f.graph,{selection:e.selection,selections:e.selections,setProps:e.setProps});return a.a.createElement(a.a.Fragment,null,a.a.createElement("g",{className:"dash-sankey-links"},d.links.map((function(e){return a.a.createElement(Ue,{key:e.id,selections:p,link:e,lineOffset:n,total:l})})),d.nodes.map((function(e){return a.a.createElement(o.Fragment,{key:e.id},a.a.createElement(De,{selections:p,node:e,lineOffset:n,total:l}),a.a.createElement(We,{key:e.id,selections:p,node:e,nLayers:d.layers.length,lineOffset:n,total:l}))}))),u&&a.a.createElement("g",{className:"dash-sankey-layers"},d.layers.map((function(e,t){return a.a.createElement(ze,{key:e.id,selections:p,layer:e,maxLayerY1:h,i:t,nLayers:d.layers.length,nodeWidth:y,lineOffset:n,total:l})}))),a.a.createElement("g",{className:"dash-sankey-nodes"},d.nodes.map((function(e){return a.a.createElement(Be,{key:e.id,selections:p,node:e,nLayers:d.layers.length,nodeWidth:y,total:l})}))))},Ye=i.a.arrayOf(i.a.oneOfType([i.a.string.isRequired,i.a.number.isRequired]).isRequired).isRequired,Ze=i.a.arrayOf(i.a.shape({id:i.a.string.isRequired,name:i.a.string.isRequired,ids:Ye,layer:i.a.number}).isRequired),Fe=i.a.arrayOf(i.a.shape({source:i.a.string.isRequired,target:i.a.string.isRequired,ids:i.a.arrayOf(i.a.oneOfType([i.a.string.isRequired,i.a.number.isRequired]).isRequired)}).isRequired),Ge=i.a.oneOfType([Ye,i.a.shape({id:i.a.string.isRequired,type:i.a.oneOf(["node","link","missing_in","missing_out","layer"]).isRequired,ids:Ye})]),He=(n(2),function(e){var t,n=e.id,r=e.children,i=e.height,c=void 0===i?300:i,u=e.setProps,l=Object(o.useCallback)((function(){u&&u({selection:[]})}),[u]),f=Object(o.useMemo)((function(){var t;return B(null!==(t=e.padding)&&void 0!==t?t:K,K)}),[e.padding]),d=s(),h=d.ref,y=d.width,p=void 0===y?f.left+f.right+10:y,v=null!==(t=e.width)&&void 0!==t?t:p;return a.a.createElement("div",{ref:h,id:n},a.a.createElement("svg",{width:v,height:c,className:"dash-sankey",onClick:l},a.a.createElement($e,Object.assign({},e,{width:v,height:c})),r))});He.defaultProps={id:void 0,setProps:void 0,width:void 0,height:300,padding:K,lineOffset:5,iterations:6,nodeWidth:24,nodePadding:8,nodeAlign:"justify",nodeSort:"auto",children:[],selection:void 0,selections:void 0,layers:void 0,nodes:void 0,links:void 0,showLayers:!0,total:void 0},He.propTypes={id:i.a.string,setProps:i.a.func,children:i.a.node,width:i.a.number,height:i.a.number,padding:$,lineOffset:i.a.number,showLayers:i.a.bool,total:i.a.number,iterations:i.a.number,nodeWidth:i.a.number,nodePadding:i.a.number,nodeAlign:i.a.oneOf(["left","right","center","justify","layer"]),nodeSort:i.a.oneOf(["auto","fixed"]),layers:i.a.arrayOf(i.a.shape({name:i.a.string.isRequired,nodes:i.a.arrayOf(i.a.shape({id:i.a.string.isRequired,name:i.a.string.isRequired,ids:Ye}).isRequired).isRequired}).isRequired),nodes:Ze,links:Fe,selection:Ge,selections:i.a.arrayOf(i.a.shape({color:i.a.string.isRequired,ids:Ye}).isRequired)};var Je=He;function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){Xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ke=function(e){var t,n=e.id,r=e.children,i=e.height,c=void 0===i?300:i,u=e.setProps,l=e.facets,f=e.selection,d=Object(o.useCallback)((function(){u&&u({selection:[]})}),[u]),h=Object(o.useMemo)((function(){var t;return B(null!==(t=e.padding)&&void 0!==t?t:K,K)}),[e.padding]),y=s(),p=y.ref,v=y.width,m=void 0===v?h.left+h.right+10:v,g=null!==(t=e.width)&&void 0!==t?t:m,b=l.length>0?c/l.length:c,_=Object(o.useMemo)((function(){return l.map((function(e){return Qe(Qe({},e),{},{setProps:function(t){if(u)if(null==t.selection||Array.isArray(t.selection))u(t);else{var n=Qe(Qe({},t.selection),{},{facet:e.name});u({selection:n})}},selection:Array.isArray(f)||null==f||f.facet===e.name?f:void 0})}))}),[l,u,f]);return a.a.createElement("div",{ref:p,id:n},a.a.createElement("svg",{width:g,height:c,className:"dash-sankey",onClick:d},_.map((function(t,n){return a.a.createElement("g",{key:t.name,transform:"translate(0, ".concat(n*b,")")},a.a.createElement("text",{x:g-12,y:b/2,className:"dash-sankey-facet-name"},t.name),a.a.createElement($e,Object.assign({},e,t,{width:g-16,height:b})))})),r))},et=i.a.oneOfType([Ye,i.a.shape({id:i.a.string.isRequired,type:i.a.oneOf(["node","link","missing_in","missing_out","layer"]).isRequired,ids:Ye,facet:i.a.string.isRequired})]);Ke.propTypes={id:i.a.string,setProps:i.a.func,children:i.a.node,width:i.a.number,height:i.a.number,padding:$,lineOffset:i.a.number,showLayers:i.a.bool,iterations:i.a.number,nodeWidth:i.a.number,nodePadding:i.a.number,nodeAlign:Je.propTypes.nodeAlign,nodeSort:Je.propTypes.nodeSort,selection:et,selections:Je.propTypes.selections,facets:i.a.arrayOf(i.a.shape({name:i.a.string.isRequired,layers:i.a.arrayOf(i.a.shape({name:i.a.string.isRequired,nodes:i.a.arrayOf(i.a.shape({id:i.a.string.isRequired,name:i.a.string.isRequired,ids:Ye}).isRequired).isRequired}).isRequired).isRequired,nodes:Ze,links:Fe}).isRequired).isRequired};var tt=Ke;n.d(t,"DashSankey",(function(){return Je})),n.d(t,"FacettedSankey",(function(){return tt}))}]);
//# sourceMappingURL=dash_sankey.min.js.map